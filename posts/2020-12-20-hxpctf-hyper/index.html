<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>hxp CTF 2020: Hyper | Black Bauhinia</title>

<meta name="keywords" content="ctf, hxpctf, crypto, hyperelliptic-curves" />
<meta name="description" content="I was teamed up to play hxp CTF as @blackb6a last week. The hxp team had come up with a collection of hard challenges. In particular, there are two series of crypto challenges with a total of five parts. I will be writing on the hyper challenge and some follow-up and unanswered questions regarding to hyperelliptic curves.
â“˜ ğ—¢ğ—³ğ—³ğ—¶ğ—°ğ—¶ğ—®ğ—¹ ğ˜€ğ—¼ğ˜‚ğ—¿ğ—°ğ—²ğ˜€ ğ˜€ğ˜ğ—®ğ˜ğ—²ğ—± ğ˜ğ—µğ—®ğ˜ ğ˜ğ—µğ—¶ğ˜€ ğ—¶ğ˜€ ğ—ºğ—¶ğ˜€ğ—¹ğ—²ğ—®ğ—±ğ—¶ğ—»ğ—´
Seriously. I knew nothing on hyperelliptic curves prior to the CTF.">
<meta name="author" content="Mystiz">
<link rel="canonical" href="https://b6a.black/posts/2020-12-20-hxpctf-hyper/" />
<link href="/assets/css/stylesheet.min.79c4dfee3993cd3110886e38d36a5106e0d6922344cefa3ff5c0076f246815f0.css" integrity="sha256-ecTf7jmTzTEQiG4402pRBuDWkiNEzvo/9cAHbyRoFfA=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://b6a.black/favicon.ico">

<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.91.0" />




<script async src="https://www.googletagmanager.com/gtag/js?id=G-M67YZZ2MP1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M67YZZ2MP1');
</script>



<script src="https://kit.fontawesome.com/fbbadced05.js" crossorigin="anonymous"></script>


<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Recursive&display=swap" rel="stylesheet"> 


<meta property="og:title" content="hxp CTF 2020: Hyper" />
<meta property="og:description" content="I was teamed up to play hxp CTF as @blackb6a last week. The hxp team had come up with a collection of hard challenges. In particular, there are two series of crypto challenges with a total of five parts. I will be writing on the hyper challenge and some follow-up and unanswered questions regarding to hyperelliptic curves.
â“˜ ğ—¢ğ—³ğ—³ğ—¶ğ—°ğ—¶ğ—®ğ—¹ ğ˜€ğ—¼ğ˜‚ğ—¿ğ—°ğ—²ğ˜€ ğ˜€ğ˜ğ—®ğ˜ğ—²ğ—± ğ˜ğ—µğ—®ğ˜ ğ˜ğ—µğ—¶ğ˜€ ğ—¶ğ˜€ ğ—ºğ—¶ğ˜€ğ—¹ğ—²ğ—®ğ—±ğ—¶ğ—»ğ—´
Seriously. I knew nothing on hyperelliptic curves prior to the CTF." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://b6a.black/posts/2020-12-20-hxpctf-hyper/" />
<meta property="article:published_time" content="2020-12-20T23:53:00+08:00" />
<meta property="article:modified_time" content="2020-12-20T23:53:00+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="hxp CTF 2020: Hyper"/>
<meta name="twitter:description" content="I was teamed up to play hxp CTF as @blackb6a last week. The hxp team had come up with a collection of hard challenges. In particular, there are two series of crypto challenges with a total of five parts. I will be writing on the hyper challenge and some follow-up and unanswered questions regarding to hyperelliptic curves.
â“˜ ğ—¢ğ—³ğ—³ğ—¶ğ—°ğ—¶ğ—®ğ—¹ ğ˜€ğ—¼ğ˜‚ğ—¿ğ—°ğ—²ğ˜€ ğ˜€ğ˜ğ—®ğ˜ğ—²ğ—± ğ˜ğ—µğ—®ğ˜ ğ˜ğ—µğ—¶ğ˜€ ğ—¶ğ˜€ ğ—ºğ—¶ğ˜€ğ—¹ğ—²ğ—®ğ—±ğ—¶ğ—»ğ—´
Seriously. I knew nothing on hyperelliptic curves prior to the CTF."/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "hxp CTF 2020: Hyper",
  "name": "hxp CTF 2020: Hyper",
  "description": "I was teamed up to play hxp CTF as @blackb6a last week. The hxp team had come up with a collection of hard challenges. In particular, there are two series of crypto challenges with â€¦",
  "keywords": [
    "ctf", "hxpctf", "crypto", "hyperelliptic-curves"
  ],
  "articleBody": "I was teamed up to play hxp CTF as @blackb6a last week. The hxp team had come up with a collection of hard challenges. In particular, there are two series of crypto challenges with a total of five parts. I will be writing on the hyper challenge and some follow-up and unanswered questions regarding to hyperelliptic curves.\nâ“˜ ğ—¢ğ—³ğ—³ğ—¶ğ—°ğ—¶ğ—®ğ—¹ ğ˜€ğ—¼ğ˜‚ğ—¿ğ—°ğ—²ğ˜€ ğ˜€ğ˜ğ—®ğ˜ğ—²ğ—± ğ˜ğ—µğ—®ğ˜ ğ˜ğ—µğ—¶ğ˜€ ğ—¶ğ˜€ ğ—ºğ—¶ğ˜€ğ—¹ğ—²ğ—®ğ—±ğ—¶ğ—»ğ—´\nSeriously. I knew nothing on hyperelliptic curves prior to the CTF. The writeup is solely based on what I learnt during the game, and may not be accurate. If you found a mistake, please do not hesitate to contact me. Many thanks! :smile:\n Challenge Summary In this series of challenge, the message Hello! The flag is: hxp{...} is xorred with an bytestream generated by an PRNG. In particular, the only difference between hyper (crypto, 294 points) and hyperhyper (crypto, 714 points) is the message lengths, respectively 45 and 93.\nWithout doubt, the most crucial element for this challenge is the PRNG, which is based on Jacobian of hyperelliptic curves. In this challenge, the Jacobian $\\mathcal{J}$ of a hyperelliptic curve $\\mathcal{H}$ of genus 3 over $\\mathbb{Z}_p$ is used. $\\mathcal{H}$ is defined by:\n\\[\\mathcal{H}: y^2 \\equiv x^7 + x\\ (\\text{mod}\\ p).\\]\nThree constant points $G_1, G_2, G_3$ from $\\mathcal{J}$ are picked and three integers $k_1, k_2, k_3$ are picked randomly as the seed. Finally, define $H_n \\in \\mathcal{J}$ by $H_n := k_1^nG_1 + k_2^nG_2 + k_3^nG_3$ for $n\\in\\mathbb{N}$. If we write $H_n = \\left(u_n\\left(x\\right), v_n\\left(x\\right)\\right)$, where\n\\[\\begin{cases} u_n(x) := u_{n0} + u_{n1} x + u_{n2} x^2 + u_{n3} x^3 \\\\ v_n(x) := v_{n0} + v_{n1} x + v_{n2} x^2 \\end{cases},\\]\nthen the random stream would be $(u_{10}, u_{11}, u_{12}, v_{10}, v_{11}, v_{12}, u_{20}, u_{21}, ...)$, where each of $u_{ij}$ and $v_{ij}$'s is of 8 bytes.\nSolution Part I: Comparing hyper and hyperhyper One thing that made me very curious at first glance: We are given 24 bytes of the random bytestream from the known message in both hyper and hyperhyper, why is hyperhyper an independent question? If we are able to recover internal state for the PRNG, wouldn't it be evident to solve the both parts?\nOf course, I would have not questions if I have understood the PRNG. Since the first 24 bytes are known, we have $u_1(x)$. For hyper, we gotta recover the following 21 bytes, which is enough by recovering $v_1(x)$. After all, the points are given in Mumford representation. With that said, if a point $P\\left(u\\left(x\\right), v\\left(x\\right)\\right)\\in\\mathcal{J}$, the below properties are satisfied1:\n  $u(x)$ is monic, $f(x) \\equiv [v(x)]^2\\ \\left(\\text{mod}\\ u\\left(x\\right)\\right)$, and $\\deg\\left(v\\left(x\\right)\\right)   It is hinted from the second property that the objective is to find a modular square root for $f(x)$ under modulo $u(x)$.\nPart II: Midnight thoughts It was midnight when I realize this and I could not immediately think of an appropriate approach. I was even once expanding everything:\nSuppose that we have $u(x) := x^3 + rx^2 + sx + t$ and $v(x) := ax^2 + bx + c$. Then the following modular congruences hold:\n\\[\\begin{cases} -r^5 + 4r^3s - 3r^2t - 3rs^2 + 2st - a^2r^2 + 2abr + a^2s - 2ac - b^2 \\equiv 0 \\\\ -r^4s + 3r^2s^2 - 4rst - s^3 + r^3t + t^2 + 1 - a^2rs + 2abs + a^2t - 2bc \\equiv 0 \\\\ -r^4t + 3r^2st - 2rt^2 - s^2t - a^2rt + 2abt - c^2 \\equiv 0 \\end{cases}(\\text{mod}\\ p).\\]\nI must be very sleepy back then.\nPart III: Wake up, wake up! After [enter an arbitrary number] hours of sleep, I woke up and immediately recalled Tonelli-Shanks algorithm. Basically we are able to apply the algorithm to compute modular square root, even with modulo $u(x)$. Since $u(x)$ is a degree 3 polynomial over $\\mathbb{Z}_p$, the order for $\\mathcal{G} := \\text{GF}(p)[x]/u(x)$ would be a factor of $p^3 - 1$. Knowing the order, we can apply Tonelli-Shanks to compute a modular square root for $f(x)$. After all, $v(x)$ would be one of them.\nThe rest is trivial after we have $v_1(x)$ computed. Xorring the output with the keystream, we have the message: Hello! The flag is: hxp{ez_P4rT_i5_ez__tL0Cm}.\nPart IV: Mysteries of hyperelliptic curves I am not going to talk about solutions anymore. This section contains a list of unproved properties which looked truthy for me. Those questions came to my mind while attempting hyperhyper, while I have no proofs. The questions are no means useful for solving the questions, but I think they are helpful in pairing-based cryptography. They are very likely used somewhere anyway.  Let $\\mathcal{J}$ be the Jacobian of a hyperelliptic curve of genus 3. Suppose that $\\sigma$ is the order of $G_1, G_2, G_3\\in\\mathcal{J}$.\n Question 1. Is $a_1G_1 + a_2G_2 + a_3G_3$ also has an order $\\sigma$ given that $gcd(a_i, \\sigma)=1$? Question 2. Define $S := \\{k_1G_1 + k_2G_2 + k_3G_3 \\in \\mathcal{J}: k_1, k_2, k_3\\in\\mathbb{Z}\\}$. Is $\\left|S\\right| = \\sigma^3$? Question 3. Let $(\\mathbb{Z}_p^3, +)$ be a group and define $x = (x_1, x_2, x_3), y = (y_1, y_2, y_3) \\in\\mathbb{Z}_p^3$. Suppose $x+y = (x_1+y_1, x_2+y_2, x_3+y_3)$. Is $(\\mathbb{Z}_p^3, +)$ isomorphic to $S$?    Jasper Scholten, Frederik Vercauteren (2003). \"An Introduction to Elliptic and Hyperelliptic Curve Cryptography and the NTRU Cryptosystem\"\nhttps://homes.esat.kuleuven.be/~fvercaut/papers/cc03.pdf [return]   ",
  "wordCount" : "867",
  "inLanguage": "en",
  "datePublished": "2020-12-20T23:53:00+08:00",
  "dateModified": "2020-12-20T23:53:00+08:00",
  "author":[{
    "@type": "Person",
    "name": "Mystiz"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://b6a.black/posts/2020-12-20-hxpctf-hyper/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Black Bauhinia",
    "logo": {
      "@type": "ImageObject",
      "url": "https://b6a.black/favicon.ico"
    }
  }
}
</script>



</head>

<body class=" dark" id="top">
<noscript>
    <style type="text/css">
        .theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://b6a.black/" accesskey="h" title="Black Bauhinia (Alt + H)">Black Bauhinia</a>
            <span class="logo-switches">
                
                
            </span>
        </div>
        <ul id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://b6a.black/about-us/" title="About Us">
                    <span>About Us</span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">

    <h1 class="post-title">
      hxp CTF 2020: Hyper
    </h1>
    <div class="post-meta">

December 20, 2020&nbsp;Â·&nbsp;Mystiz

</div>
  </header>
  
  
  <div class="post-content js-toc-content">
<p>I was teamed up to play <em>hxp CTF</em> as @blackb6a last week. The <em>hxp</em> team had come up with a collection of hard challenges. In particular, there are two series of crypto challenges with a total of five parts. I will be writing on the <em>hyper</em> challenge and some follow-up and unanswered questions regarding to hyperelliptic curves.</p>

<div class="alert danger">
  <p>â“˜ ğ—¢ğ—³ğ—³ğ—¶ğ—°ğ—¶ğ—®ğ—¹ ğ˜€ğ—¼ğ˜‚ğ—¿ğ—°ğ—²ğ˜€ ğ˜€ğ˜ğ—®ğ˜ğ—²ğ—± ğ˜ğ—µğ—®ğ˜ ğ˜ğ—µğ—¶ğ˜€ ğ—¶ğ˜€ ğ—ºğ—¶ğ˜€ğ—¹ğ—²ğ—®ğ—±ğ—¶ğ—»ğ—´</p>
<p><strong>Seriously.</strong> I knew nothing on hyperelliptic curves prior to the CTF. The writeup is solely based on what I learnt during the game, and may not be accurate. If you found a mistake, please do not hesitate to contact me. Many thanks! :smile:</p>

</div>
  

<h2 id="challenge-summary">Challenge Summary<a hidden class="anchor" aria-hidden="true" href="#challenge-summary">#</a></h2>

<p>In this series of challenge, the message <code>Hello! The flag is: hxp{...}</code> is <em>xorred</em> with an bytestream generated by an PRNG. In particular, the only difference between <em>hyper</em> (crypto, 294 points) and <em>hyperhyper</em> (crypto, 714 points) is the message lengths, respectively 45 and 93.</p>

<p>Without doubt, the most crucial element for this challenge is the PRNG, which is based on <em>Jacobian of hyperelliptic curves</em>. In this challenge, the Jacobian $\mathcal{J}$ of a hyperelliptic curve $\mathcal{H}$ of genus 3 over $\mathbb{Z}_p$ is used. $\mathcal{H}$ is defined by:</p>

<p><span  class="math">\[\mathcal{H}: y^2 \equiv x^7 + x\ (\text{mod}\ p).\]</span></p>

<p>Three constant points $G_1, G_2, G_3$ from $\mathcal{J}$ are picked and three integers $k_1, k_2, k_3$ are picked randomly as the seed. Finally, define $H_n \in \mathcal{J}$ by $H_n := k_1^nG_1 + k_2^nG_2 + k_3^nG_3$ for $n\in\mathbb{N}$. If we write $H_n = \left(u_n\left(x\right), v_n\left(x\right)\right)$, where</p>

<p><span  class="math">\[\begin{cases}
u_n(x) := u_{n0} + u_{n1} x + u_{n2} x^2 + u_{n3} x^3 \\
v_n(x) := v_{n0} + v_{n1} x + v_{n2} x^2
\end{cases},\]</span></p>

<p>then the random stream would be $(u_{10}, u_{11}, u_{12}, v_{10}, v_{11}, v_{12}, u_{20}, u_{21}, ...)$, where each of $u_{ij}$ and $v_{ij}$'s is of 8 bytes.</p>

<h2 id="solution">Solution<a hidden class="anchor" aria-hidden="true" href="#solution">#</a></h2>

<h3 id="part-i-comparing-hyper-and-hyperhyper">Part I: Comparing <em>hyper</em> and <em>hyperhyper</em><a hidden class="anchor" aria-hidden="true" href="#part-i-comparing-hyper-and-hyperhyper">#</a></h3>

<p>One thing that made me very curious at first glance: We are given 24 bytes of the random bytestream from the known message in both <em>hyper</em> and <em>hyperhyper</em>, why is <em>hyperhyper</em> an independent question? If we are able to recover internal state for the PRNG, wouldn't it be evident to solve the both parts?</p>

<p>Of course, I would have not questions if I have understood the PRNG. Since the first 24 bytes are known, we have $u_1(x)$. For <em>hyper</em>, we gotta recover the following 21 bytes, which is enough by recovering $v_1(x)$. After all, the points are given in <em>Mumford representation</em>. With that said, if a point $P\left(u\left(x\right), v\left(x\right)\right)\in\mathcal{J}$, the below properties are satisfied<sup class="footnote-ref" id="fnref:hyperelliptic-properties"><a class="footnote" href="#fn:hyperelliptic-properties">1</a></sup>:</p>

<blockquote>
<ol>
<li>$u(x)$ is monic,</li>
<li>$f(x) \equiv [v(x)]^2\ \left(\text{mod}\ u\left(x\right)\right)$, and</li>
<li>$\deg\left(v\left(x\right)\right) &lt; \deg\left(u\left(x\right)\right) \leq 3$.</li>
</ol>
</blockquote>

<p>It is hinted from the second property that the objective is to find a modular square root for $f(x)$ under modulo $u(x)$.</p>

<h3 id="part-ii-midnight-thoughts">Part II: Midnight thoughts<a hidden class="anchor" aria-hidden="true" href="#part-ii-midnight-thoughts">#</a></h3>

<p>It was midnight when I realize this and I could not immediately think of an appropriate approach. I was even once expanding everything:</p>

<p>Suppose that we have $u(x) := x^3 + rx^2 + sx + t$ and $v(x) := ax^2 + bx + c$. Then the following modular congruences hold:</p>

<p><span  class="math">\[\begin{cases}
-r^5 + 4r^3s - 3r^2t - 3rs^2 + 2st - a^2r^2 + 2abr + a^2s - 2ac - b^2 \equiv 0 \\
-r^4s + 3r^2s^2 - 4rst - s^3 + r^3t + t^2 + 1 - a^2rs + 2abs + a^2t - 2bc \equiv 0 \\
-r^4t + 3r^2st - 2rt^2 - s^2t - a^2rt + 2abt - c^2 \equiv 0
\end{cases}(\text{mod}\ p).\]</span></p>

<p>I must be very sleepy back then.</p>

<h3 id="part-iii-wake-up-wake-up">Part III: Wake up, wake up!<a hidden class="anchor" aria-hidden="true" href="#part-iii-wake-up-wake-up">#</a></h3>

<p>After [<em>enter an arbitrary number</em>] hours of sleep, I woke up and immediately recalled Tonelli-Shanks algorithm. Basically we are able to apply the algorithm to compute modular square root, even with modulo $u(x)$. Since $u(x)$ is a degree 3 polynomial over $\mathbb{Z}_p$, the order for $\mathcal{G} := \text{GF}(p)[x]/u(x)$ would be a factor of $p^3 - 1$. Knowing the order, we can apply Tonelli-Shanks to compute a modular square root for $f(x)$. After all, $v(x)$ would be one of them.</p>

<p>The rest is trivial after we have $v_1(x)$ computed. Xorring the output with the keystream, we have the message: <code>Hello! The flag is: hxp{ez_P4rT_i5_ez__tL0Cm}</code>.</p>

<h3 id="part-iv-mysteries-of-hyperelliptic-curves">Part IV: Mysteries of hyperelliptic curves<a hidden class="anchor" aria-hidden="true" href="#part-iv-mysteries-of-hyperelliptic-curves">#</a></h3>

<div class="alert danger">
  I am not going to talk about solutions anymore. This section contains a list of unproved properties which looked truthy for me. Those questions came to my mind while attempting <em>hyperhyper</em>, while I have no proofs. The questions are no means useful for solving the questions, but I think they are helpful in pairing-based cryptography. They are very likely used somewhere anyway.
</div>
  

<p>Let $\mathcal{J}$ be the Jacobian of a hyperelliptic curve of genus 3. Suppose that $\sigma$ is the order of $G_1, G_2, G_3\in\mathcal{J}$.</p>

<ul>
<li><strong>Question 1.</strong> Is $a_1G_1 + a_2G_2 + a_3G_3$ also has an order $\sigma$ given that $gcd(a_i, \sigma)=1$?</li>
<li><strong>Question 2.</strong> Define $S := \{k_1G_1 + k_2G_2 + k_3G_3 \in \mathcal{J}: k_1, k_2, k_3\in\mathbb{Z}\}$. Is $\left|S\right| = \sigma^3$?</li>
<li><strong>Question 3.</strong> Let $(\mathbb{Z}_p^3, +)$ be a group and define $x = (x_1, x_2, x_3), y = (y_1, y_2, y_3) \in\mathbb{Z}_p^3$. Suppose $x+y = (x_1+y_1, x_2+y_2, x_3+y_3)$. Is $(\mathbb{Z}_p^3, +)$ isomorphic to $S$?</li>
</ul>
<div class="footnotes">

<hr>

<ol>
<li id="fn:hyperelliptic-properties">Jasper Scholten, Frederik Vercauteren (2003). &quot;An Introduction to Elliptic and Hyperelliptic Curve Cryptography and the NTRU Cryptosystem&quot;<br><a href="https://homes.esat.kuleuven.be/~fvercaut/papers/cc03.pdf">https://homes.esat.kuleuven.be/~fvercaut/papers/cc03.pdf</a>
 <a class="footnote-return" href="#fnref:hyperelliptic-properties"><sup>[return]</sup></a></li>
</ol>
</div>

</div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://b6a.black/tags/ctf/">ctf</a></li>
      <li><a href="https://b6a.black/tags/hxpctf/">hxpctf</a></li>
      <li><a href="https://b6a.black/tags/crypto/">crypto</a></li>
      <li><a href="https://b6a.black/tags/hyperelliptic-curves/">hyperelliptic-curves</a></li>
    </ul>
    <nav class="paginav">
      <a class="prev" href="https://b6a.black/posts/2021-01-03-tetctf-unevaluated/">
        <span class="title">Â« Prev Page</span>
        <br>
        <span>TetCTF 2021: unevaluated</span>
      </a>
      <a class="next" href="https://b6a.black/posts/2020-11-23-dragonctf/">
        <span class="title">Next Page Â»</span>
        <br>
        <span>Dragon CTF 2020 Writeup</span>
      </a>
    </nav>
  </footer>
</article>
<aside class="toc-container">
  <a href="#" style="text-decoration: none; font-weight: 700;">
    hxp CTF 2020: Hyper
  </a>
  <div class="js-toc"></div>
</aside>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.12.0/tocbot.min.css" integrity="sha512-SFw7k74K3983tyOlJIHa8atr9Ppef3Kix5cmifwzU7ZdtU2E0FRuOVRtd3ENpMJ8sNCie5hlb/0j23efcdQJXA==" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.12.0/tocbot.min.js" integrity="sha512-oD3xGN8YTxenx6tdS4D/RKqO4OtORBQtAb2/FseM17GGMIi6jMwKUBc8duX4A5RwMOGGXoFBZrsqbOk8GpXFgQ==" crossorigin="anonymous"></script>

<script type="text/javascript">
  tocbot.init({
    headingSelector: 'h1, h2, h3, h4',
    orderedList: false,
    headingLabelCallback: s => s.substr(0, s.length-1),
    collapseDepth: 2
  });
</script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/viz.js/1.7.1/viz.js"> </script>
<script type="text/javascript">
  (function () {
    const vizPrefix = "language-viz-";
    Array.prototype.forEach.call(document.querySelectorAll("[class^=" + vizPrefix + "]"), function (x) {
      let engine;
      x.getAttribute("class").split(" ").forEach(function (cls) {
        if (cls.startsWith(vizPrefix)) {
          engine = cls.substr(vizPrefix.length);
        }
      });
      const image = new DOMParser().parseFromString(Viz(x.innerText, { format: "svg", engine: engine }), "image/svg+xml");
      x.parentNode.insertBefore(image.documentElement, x);
      x.style.display = 'none'
      x.parentNode.style.backgroundColor = "white"
    });
  })();
</script>
    </main><footer class="footer">
    <span>&copy; 2022 <a href="https://b6a.black/">Black Bauhinia</a></span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
  integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"
  integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"
  integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"
  onload="renderMathInElement(document.body, { delimiters: [{ left: '$$', right: '$$', display: true }, { left: '\\[', right: '\\]', display: true }, { left: '$', right: '$', display: false }, { left: '\\(', right: '\\)', display: false }]})"></script>



<script defer src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>

</body>

</html>
